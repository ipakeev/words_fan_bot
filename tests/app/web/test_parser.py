import json

from app.web import parser

text = """{"head":{},"en-ru":{"regular":[{"text":"dunk","pos":{"code":"vrb","text":"v","tooltip":"verb"},"ts":"dʌŋk","prdg":{"irreg":false,"data":[{"tabs":["Past tenses","Present tenses","Future tenses"],"tables":[{"tab":0,"headers":["Past Simple","Past Continuous","Past Perfect","Past Perfect Continuous"],"headerComments":["used with yesterday, last year, ago","used with from ... till ... (yesterday)","used with before, when ... already, by the time","used with when ... for"],"timelines":[{"ticks":[{"text":"event","left":"15%"},{"text":"now","left":"50%"}]},{"ticks":[{"text":"event","left":"15%"},{"text":"now","left":"50%"}],"highlight":{"left":"10%","width":"10%"}},{"ticks":[{"text":"event","left":"15%"},{"text":"now","left":"50%"}],"highlight":{"left":"1%","width":"18%"}},{"ticks":[{"text":"event","left":"15%"},{"text":"now","left":"50%"}],"highlight":{"left":"12%","width":"20%"}}],"rows":[["dunked"],["(was/were) dunking"],["(had) dunked"],["(had been) dunking"]]},{"tab":1,"headers":["Present Simple","Present Continuous","Present Perfect","Present Perfect Continuous"],"headerComments":["used with usually, often","used with now, at the moment","used with already, never, ever, not yet, just","used with since, for, how long"],"timelines":[{"ticks":[{"text":"now","left":"50%"}],"highlight":{"left":"1%","width":"98%"}},{"ticks":[{"text":"now","left":"50%"}],"highlight":{"left":"47%","width":"6%"}},{"ticks":[{"text":"now","left":"50%"}],"highlight":{"left":"1%","width":"52%"}},{"ticks":[{"text":"now","left":"50%"},{"text":"event","left":"33%"}],"highlight":{"left":"32%","width":"21%"}}],"rows":[["dunk","dunks"],["(to be) dunking"],["(have/has) dunked"],["(have/has been) dunking"]]},{"tab":2,"headers":["Future Simple","Future Continuous","Future Perfect","Future Perfect Continuous"],"headerComments":["used with tomorrow, next week/month","used with at ..., o'clock","used with by (next month), already","used with for, when, by"],"timelines":[{"ticks":[{"text":"now","left":"50%"},{"text":"event","left":"85%"}]},{"ticks":[{"text":"now","left":"50%"},{"text":"event","left":"85%"}],"highlight":{"left":"82%","width":"6%"}},{"ticks":[{"text":"now","left":"50%"},{"text":"event","left":"85%"}],"highlight":{"left":"71%","width":"17%"}},{"ticks":[{"text":"now","left":"50%"},{"text":"event","left":"85%"}],"highlight":{"left":"82%","width":"17%"}}],"rows":[["(will) dunk"],["(will be) dunking"],["(will have) dunked"],["(will have been) dunking"]]}]}]},"tr":[{"text":"макать","pos":{"code":"vrb","text":"гл","tooltip":"verb"},"asp":{"code":"im","text":"несов","tooltip":"imperfective aspect"},"fr":10,"syn":[{"text":"окунуть","pos":{"code":"vrb","text":"гл","tooltip":"verb"},"asp":{"code":"pf","text":"сов","tooltip":"perfective aspect"},"fr":10},{"text":"обмакнуть","pos":{"code":"vrb","text":"гл","tooltip":"verb"},"asp":{"code":"pf","text":"сов","tooltip":"perfective aspect"},"fr":5},{"text":"макнуть","pos":{"code":"vrb","text":"гл","tooltip":"verb"},"asp":{"code":"pf","text":"сов","tooltip":"perfective aspect"},"fr":5},{"text":"обмакивать","pos":{"code":"vrb","text":"гл","tooltip":"verb"},"asp":{"code":"im","text":"несов","tooltip":"imperfective aspect"},"fr":1}],"mean":[{"text":"dip"}]},{"text":"замочить","pos":{"code":"vrb","text":"гл","tooltip":"verb"},"asp":{"code":"pf","text":"сов","tooltip":"perfective aspect"},"fr":10,"syn":[{"text":"смочить","pos":{"code":"vrb","text":"гл","tooltip":"verb"},"asp":{"code":"pf","text":"сов","tooltip":"perfective aspect"},"fr":1}],"mean":[{"text":"soak"}]}]},{"text":"dunk","pos":{"code":"nn","text":"n","tooltip":"noun"},"ts":"dʌŋk","prdg":{"irreg":false,"data":[{"tables":[{"headers":["Common Case","Possessive Case"],"rows":[["dunk","dunks"],["dunk's","dunks'"]],"rowComments":[["Singular","Plural"],["Singular","Plural"]]}]}]},"tr":[{"text":"Данк","pos":{"code":"nn","text":"сущ","tooltip":"noun"},"gen":{"code":"m","text":"м","tooltip":"masculine"},"fr":10}]}]}}"""
translation_namespace = json.loads(text)["en-ru"]

text = """{"head":{"card":true},"en-ru":{"def":[{"text":"have a ball","tr":[{"def":"Приятно провести время.","ref":{"name":"","url":""},"idiom":true,"labels":"","syns":[""]}]}]}}"""
exclusive_namespace = json.loads(text)["en-ru"]

text = """{"result":{"tabs":[{"pos":{"code":"vrb","text":"гл","tooltip":"глагол"},"text":"dunk","translation":{"pos":{"code":"vrb","text":"гл","tooltip":"глагол"},"text":"макать"}},{"pos":{"code":"vrb","text":"гл","tooltip":"глагол"},"text":"dunk","translation":{"pos":{"code":"vrb","text":"гл","tooltip":"глагол"},"text":"окунуть"}},{"pos":{"code":"vrb","text":"гл","tooltip":"глагол"},"text":"dunk","translation":{"pos":{"code":"vrb","text":"гл","tooltip":"глагол"},"text":"обмакнуть"}},{"pos":{"code":"vrb","text":"гл","tooltip":"глагол"},"text":"dunk","translation":{"pos":{"code":"vrb","text":"гл","tooltip":"глагол"},"text":"макнуть"}},{"pos":{"code":"vrb","text":"гл","tooltip":"глагол"},"text":"dunk","translation":{"pos":{"code":"vrb","text":"гл","tooltip":"глагол"},"text":"замочить"}},{"pos":{"code":"nn","text":"сущ","tooltip":"существительное"},"text":"dunk","translation":{"pos":{"code":"nn","text":"сущ","tooltip":"существительное"},"text":"Данк"}},{"pos":{"code":"vrb","text":"гл","tooltip":"глагол"},"text":"dunk","translation":{"other":true}},{"text":"dunk","translation":{"idiom":true}}],"examples":[{"dst":"Скажи, где ты научилась так <макать>?","id":"20fdfda90b1987666485c15c4731b04d","ref":{"director":"Фрэнк Капра","imdb":"https://www.imdb.com/title/tt0025316/","orig_title":"It Happened One Night","title":"Это случилось однажды ночью","type":"movie","url":"https://www.kinopoisk.ru/film/437/"},"src":"Say, where\'d you learn to <dunk>?","tabIndex":0},{"dst":"Подходите и <окуните> меня, люди!","id":"585b49f8fe24e025a8563be20154d2a0","ref":{"director":"Джо Питт и другие","imdb":"https://www.imdb.com/title/tt2310928/","orig_title":"Gravity Falls","title":"Гравити Фолз","type":"series","url":"https://www.kinopoisk.ru/film/591929/"},"src":"Step right up and <dunk> me, folks!","tabIndex":1},{"dst":"Только <обмакни> в кетчупе.","id":"0515cbeb7433324ae6fcca45d5c1fa9d","ref":{"director":"Тони Дау и другие","imdb":"https://www.imdb.com/title/tt3969144/","orig_title":"Big School","title":"Большая школа","type":"series","url":"https://www.kinopoisk.ru/film/784421/"},"src":"Just <dunk> it in the ketchup.","tabIndex":2},{"dst":"Знания викингов говорят нам, что для продолжения мужской линии нашего славного рода... ты должен взять большую чашку со льдом и <макнуть> свои причиндалы прямо туда.","id":"9e563e325914d168cff228d73bd927bf","ref":{"director":"Памела Фрайман и другие","imdb":"https://www.imdb.com/title/tt1737328/","orig_title":"How I Met Your Mother","title":"Как я встретил вашу маму","type":"series","url":"https://www.kinopoisk.ru/film/401522/"},"src":"Viking lore tells us that to ensure the continuation of your noble male lineage... get a big old bowl of ice and <dunk> your man sack right in there!","tabIndex":3},{"dst":"Ведь сейчас вы можете его <замочить>.","id":"aefabed5c25dde25ff314fa3bd1001fa","ref":{"director":"Джон Соломон и другие","imdb":"https://www.imdb.com/title/tt4244652/","orig_title":"Last Man on Earth, The","title":"Последний человек на Земле","type":"series","url":"https://www.kinopoisk.ru/film/804728/"},"src":"\'Cause now you can <dunk> him.","tabIndex":4},{"dst":"Можно сказать, это был слэм-<данк>, Престон.","id":"3fdda41425881a1a08a5fab6469a9388","ref":{"director":"Джо Питт и другие","imdb":"https://www.imdb.com/title/tt4373958/","orig_title":"Gravity Falls","title":"Гравити Фолз","type":"series","url":"https://www.kinopoisk.ru/film/591929/"},"src":"I guess you could say it was a slam <dunk>, Preston.","tabIndex":5},{"dst":"В буквальном смысле слова, гол, забитый в баскетболе, если положить мяч прямо в кольцо рукой.","id":"a2a8c881b5b80852ad8cef18f1d88999","ref":{"type":"idiom"},"src":"slam dunk","tabIndex":7},{"dst":"Не начинай говорить мне, что я не должна <макать>.","id":"6dbdf0466b859bedec35e7f039543f54","ref":{"director":"Фрэнк Капра","imdb":"https://www.imdb.com/title/tt0025316/","orig_title":"It Happened One Night","title":"Это случилось однажды ночью","type":"movie","url":"https://www.kinopoisk.ru/film/437/"},"src":"Don\'t you start telling me I shouldn\'t <dunk>.","tabIndex":0},{"dst":"Пойдём, <окунём> головы в сыр с шоколадом.","id":"925c7ddcff250ddfdd77e15ceae9fa6a","ref":{"director":"Джо Питт и другие","imdb":"https://www.imdb.com/title/tt4373958/","orig_title":"Gravity Falls","title":"Гравити Фолз","type":"series","url":"https://www.kinopoisk.ru/film/591929/"},"src":"Come on, let\'s go <dunk> our heads into cheese and chocolate.","tabIndex":1},{"dst":"Когда я родился, моя мама <обмакнула> меня в бочонок с сахаром.","id":"ebfb7b99a79bc7f478fc10b28ed069d9","ref":{"director":"Джеймс Пурдум и другие","imdb":"https://www.imdb.com/title/tt0576941/","orig_title":"Family Guy","title":"Гриффины","type":"series","url":"https://www.kinopoisk.ru/film/161101/"},"src":"When I was born, my mommy <dunked> me in a barrel of sugar.","tabIndex":2},{"dst":"Если он не <макнул> одну из этих голов в унитаз, то я куплю ему юбку.","id":"df3aa506fc6e32c27a72caea494ad28d","ref":{"director":"Дэвид Трейнер и другие","imdb":"https://www.imdb.com/title/tt0720096/","orig_title":"That \'70s Show","title":"Шоу 70&#8722;х","type":"series","url":"https://www.kinopoisk.ru/film/344207/"},"src":"If he doesn\'t <dunk> one of these heads in a toilet bowl, I\'m buying him a skirt.","tabIndex":3},{"dst":"Похоже кто-то готов выпустить немного пара и <замочить>... этого... ублюдка!","id":"6218116e0f105047aad76bdc616721e2","ref":{"director":"Джон Соломон и другие","imdb":"https://www.imdb.com/title/tt4244652/","orig_title":"Last Man on Earth, The","title":"Последний человек на Земле","type":"series","url":"https://www.kinopoisk.ru/film/804728/"},"src":"Looks like someone\'s ready to blow off a little steam and <dunk>... that... skunk!","tabIndex":4},{"dst":"За ней стоит замечательная команда и голос за неё - это слэм <данк>.","id":"4df9ff6a2388dd7d583271a7da6d1f5e","ref":{"director":"Дин Холлэнд и другие","imdb":"https://www.imdb.com/title/tt2143605/","orig_title":"Parks and Recreation","title":"Парки и зоны отдыха","type":"series","url":"https://www.kinopoisk.ru/film/455368/"},"src":"She\'s got a great team behind her, and a vote for her is a slam <dunk>.","tabIndex":5},{"dst":"Быть предсказанным или ожидаемым, чтобы быть успешным; быть чем-то, что легко достигает успеха или определенной цели.","id":"2ba74590bc589fbefe8280e2165eff64","ref":{"type":"idiom"},"src":"be a slam dunk","tabIndex":7},{"dst":"Думаешь мы в Лаймхаусе только тем и занимаемся, что печенье в чай <макаем>?","id":"7653ca9a9729de50d89038e3514d5e40","ref":{"director":"Энди Уилсон и другие","imdb":"https://www.imdb.com/title/tt2782524/","orig_title":"Ripper Street","title":"Улица потрошителя","type":"series","url":"https://www.kinopoisk.ru/film/677725/"},"src":"That we at Limehouse do nought but <dunk> biscuits in our tea?","tabIndex":0},{"dst":"Возьми меня за ноги и <окуни> мою голову.","id":"d95c8271327c9285cdfcf0e7c121dc5c","ref":{"director":"Питер Аванзино и другие","imdb":"https://www.imdb.com/title/tt0584439/","orig_title":"Futurama","title":"Футурама","type":"series","url":"https://www.kinopoisk.ru/film/79920/"},"src":"Grab my feet and <dunk> my head in.","tabIndex":1},{"dst":"Ты <макнула> лопатку?","id":"6f84a4d67b6d11f4a99dd9b72541a006","ref":{"director":"Энди Экерман и другие","imdb":"https://www.imdb.com/title/tt0697760/","orig_title":"Seinfeld","title":"Сайнфелд","type":"series","url":"https://www.kinopoisk.ru/film/277627/"},"src":"Did you <dunk> the spatula?","tabIndex":3},{"dst":"Я собираюсь пойти <замочить> мою голову в алоэ.","id":"8d955bad5b796ad1c2087df0d47ee5b0","ref":{"director":"Дон Скардино и другие","imdb":"https://www.imdb.com/title/tt5155314/","orig_title":"Angel from Hell","title":"Ангел из ада","type":"series","url":"https://www.kinopoisk.ru/film/893721/"},"src":"I\'m gonna go <dunk> my head in some aloe.","tabIndex":4},{"dst":"А потом вы выходите и навешиваете мяч, а потом говорите: \\"Голос за Лесли - это слэм-<данк>!\\"","id":"637c1a5d90fe81911d639ae01f3b6f09","ref":{"director":"Дин Холлэнд и другие","imdb":"https://www.imdb.com/title/tt2143605/","orig_title":"Parks and Recreation","title":"Парки и зоны отдыха","type":"series","url":"https://www.kinopoisk.ru/film/455368/"},"src":"And then, you come out, and you dunk the ball, and you say, \\"Voting for Leslie Knope is a slam <dunk>!\\"","tabIndex":5},{"dst":"Превзойти кого-то эффектным образом и/или унизительным для него способом.","id":"381797a1500b4634837468bc6911b419","ref":{"type":"idiom"},"src":"dunk on (someone)","tabIndex":7},{"dst":"Они что <макали> его в бассейн, прежде, чем дважды прострелить череп?","id":"03893fbcee10bf82e26f3d410864cccc","ref":{"director":"Брайан Спайсер и другие","imdb":"https://www.imdb.com/title/tt1781230/","orig_title":"Hawaii Five-0","title":"Гавайи 5.0","type":"series","url":"https://www.kinopoisk.ru/film/503148/"},"src":"So did they <dunk> him in the pool before they popped him twice in the head?","tabIndex":0},{"dst":"Послушайте, перед тем, как мы <окунём> ребёнка, вы не против, если я скажу пару слов?","id":"c7564e1a7427177e508e6a666ccfa299","ref":{"director":"Гейл Манкусо и другие","imdb":"https://www.imdb.com/title/tt2517458/","orig_title":"Modern Family","title":"Американская семейка","type":"series","url":"https://www.kinopoisk.ru/film/472329/"},"src":"Now listen, before we <dunk> the kid, you mind if I make a few casual remarks?","tabIndex":1},{"dst":"Так бы и <макнула> его в молоко и съела.","id":"1dfd3e3eafbc61f84f1b57454881fe38","ref":{"director":"Дэвид Катценберг и другие","imdb":"https://www.imdb.com/title/tt3218128/","orig_title":"Goldbergs, The","title":"Голдберги","type":"series","url":"https://www.kinopoisk.ru/film/738519/"},"src":"I want to <dunk> him in a glass of milk and eat him up.","tabIndex":3},{"dst":"И насколько я помню, мы его <замочили>, так ведь?","id":"9673f7677c2503b85280b0098085bbad","ref":{"director":"Джон Соломон и другие","imdb":"https://www.imdb.com/title/tt6190032/","orig_title":"Last Man on Earth, The","title":"Последний человек на Земле","type":"series","url":"https://www.kinopoisk.ru/film/804728/"},"src":"And as I recall, we <dunked> that skunk, didn\'t we?","tabIndex":4},{"dst":"Это ограбление в стиле \\"слэм-<данк>\\".","id":"fd7130bcb746709c2f986a5ebf3f61b9","ref":{"director":"Роб Бэйли и другие","imdb":"https://www.imdb.com/title/tt2013350/","orig_title":"CSI: NY","title":"CSI: Место преступления Нью-Йорк","type":"series","url":"https://www.kinopoisk.ru/film/194195/"},"src":"It\'s a slam <dunk> robbery case.","tabIndex":5},{"dst":"Погрузить кого-то или что-то во что-то, полностью или частично.","id":"906c06a6e968d0952c8ac9b0e0d4a9b7","ref":{"type":"idiom"},"src":"dunk someone or something into something","tabIndex":7},{"dst":"Мы <макаем> в него печенье.","id":"e16ce3448dcd0a1176f983020c5b7535","ref":{"director":"Джон Мэдден","imdb":"https://www.imdb.com/title/tt1412386/","orig_title":"Best Exotic Marigold Hotel, The","title":"Отель «Мэриголд»: Лучший из экзотических","type":"movie","url":"https://www.kinopoisk.ru/film/568000/"},"src":"We <dunk> biscuits into it.","tabIndex":0},{"dst":"А потом он ударил меня, сильно, так что у меня пошла кровь из носа и тогда вы <окунули> меня, и держали где-то...","id":"568f5e60db7cc1a20b3527297a9fc9bd","ref":{"director":"Брайан Фордни и другие","imdb":"https://www.imdb.com/title/tt4537926/","orig_title":"Archer","title":"Арчер","type":"series","url":"https://www.kinopoisk.ru/film/491547/"},"src":"And then he punches me, hard, and I\'m choking on the blood from my nose, and then you <dunk> me, and hold me under for...","tabIndex":1},{"dst":"Нет, нужно полностью <макнуть>.","id":"1225e13833b4f1e4daf45fc70c006361","ref":{"director":"Дэвид Гроссман и другие","imdb":"https://www.imdb.com/title/tt0558723/","orig_title":"Desperate Housewives","title":"Отчаянные домохозяйки","type":"series","url":"https://www.kinopoisk.ru/film/160958/"},"src":"No, it\'s gotta be fully <dunked>.","tabIndex":3},{"dst":"Ведь я — Легендарный <Данк> Маска!","id":"7ba74bc7a82eb8830e5f72120372a4ed","ref":{"director":"Син Итагаки","imdb":"https://www.imdb.com/title/tt1334572/","orig_title":"Basukasshu!","title":"Басквош","type":"movie","url":"https://www.kinopoisk.ru/film/455432/"},"src":"I\'m the legendary <Dunk> Mask!","tabIndex":5},{"dst":"Погрузить кого-то или что-то во что-то, полностью или частично.","id":"300c6d52235a110aa7782164c107287c","ref":{"type":"idiom"},"src":"dunk someone or (something) into something","tabIndex":7},{"dst":"Он у тебя развалится, если будешь долго <макать>.","id":"b4f4684c426f8ff2a8a2bc52826c470b","ref":{"director":"Пол Эндрю Уильямс","imdb":"https://www.imdb.com/title/tt1047011/","orig_title":"Song for Marion","title":"Песня для Марион","type":"movie","url":"https://www.kinopoisk.ru/film/465743/"},"src":"That\'ll fall in if you <dunk> it too long.","tabIndex":0},{"dst":"Майк, я <окуну> тебя в воду, хорошо, приятель?","id":"9f3a644168e9a9acb942986a0b400047","ref":{"director":"Рассел Ли Файн и другие","imdb":"https://www.imdb.com/title/tt4695732/","orig_title":"Graceland","title":"Грейсленд","type":"series","url":"https://www.kinopoisk.ru/film/681050/"},"src":"Mike, I\'m gonna <dunk> you in the water, okay, buddy?","tabIndex":1},{"dst":"Хорошо, давайте развернуться, посмотрим <данк>.","id":"44d03f75cecb073e0dbd80f3e408c86d","ref":{"director":"Джилл Бауэр и другие","imdb":"https://www.imdb.com/title/tt4382552/","orig_title":"Hot Girls Wanted","title":"Разыскиваются горячие девушки","type":"movie","url":"https://www.kinopoisk.ru/film/892320/"},"src":"Okay, let\'s turn around, let\'s see the <dunk>.","tabIndex":5},{"dst":"Погрузить кого-то или что-то во что-то, полностью или частично.","id":"8122767b8dea7f923a89d975d069bcf8","ref":{"type":"idiom"},"src":"dunk (someone) or something into something","tabIndex":7},{"dst":"Многие все еще борются, поскольку их <макают> вверх тормашками в резервуарах пропаривания воды, где они погружены и утоплены.","id":"9b39abd72fe1aaf94838c66d071d76a1","ref":{"director":"Шон Монсон","imdb":"https://www.imdb.com/title/tt0358456/","orig_title":"Earthlings","title":"Земляне","type":"movie","url":"https://www.kinopoisk.ru/film/77413/"},"src":"Many are still struggling as they are <dunked> upside down in tanks of steaming water, where they are submerged and drowned.","tabIndex":0},{"dst":"Просто пойди туда и <окуни> свои наггетсы в его коктейль!","id":"d9fbec7d2a03f5c33125f466d20b3c08","ref":{"director":"Трент О’Доннелл и другие","imdb":"https://www.imdb.com/title/tt2332173/","orig_title":"New Girl","title":"Новенькая","type":"series","url":"https://www.kinopoisk.ru/film/581129/"},"src":"Just get in there, <dunk> your nuggets in his shake!","tabIndex":1},{"dst":"Погрузить кого-то или что-то во что-то, полностью или частично.","id":"dc35b1e522a011d76bd76239a7e1b1dc","ref":{"type":"idiom"},"src":"dunk someone or (something) into (something)","tabIndex":7},{"dst":"Например, он <макает>.","id":"eb8e96cc228a7de6aa988c6ddda5a569","ref":{"director":"Энди Экерман и другие","imdb":"https://www.imdb.com/title/tt0697741/","orig_title":"Seinfeld","title":"Сайнфелд","type":"series","url":"https://www.kinopoisk.ru/film/277627/"},"src":"For example, he <dunks>.","tabIndex":0},{"dst":"А мне нужно, чтобы ты взял эту двадцатку или я <окуну> тебя в ближайший мусорник.","id":"1013d2a9b1c6464cce385176df4f4c29","ref":{"director":"Марк Тинкер и другие","imdb":"https://www.imdb.com/title/tt5902076/","orig_title":"Chicago P.D.","title":"Полиция Чикаго","type":"series","url":"https://www.kinopoisk.ru/film/763776/"},"src":"I\'m gonna need you to take this 20, or I\'m gonna <dunk> you in that garbage can head first.","tabIndex":1},{"dst":"Погрузить кого-то или что-то во что-то, полностью или частично.","id":"d6225a82e5147632c18d5894a3d34273","ref":{"type":"idiom"},"src":"dunk (someone) or (something) into something","tabIndex":7},{"dst":"Он <макает> так же, как и бьет.","id":"7a33ed97ac21a854e9f35263863f9ca4","ref":{"director":"Энди Экерман и другие","imdb":"https://www.imdb.com/title/tt0697741/","orig_title":"Seinfeld","title":"Сайнфелд","type":"series","url":"https://www.kinopoisk.ru/film/277627/"},"src":"He <dunks> like he hits.","tabIndex":0},{"dst":"Сегодня я был в ванной, <окунул> голову и одновременно моя расчёска ударила мне по пальцу.","id":"4f624968bb255345570c5ed0117f4d46","ref":{"director":"Кеннет Биллер и другие","imdb":"https://www.imdb.com/title/tt5991922/","orig_title":"Genius","title":"Гений","type":"series","url":"https://www.kinopoisk.ru/film/975848/"},"src":"So, I was in my bathtub this morning, and I <dunk> my head at the same time as I knock my hairbrush in with my toe.","tabIndex":1},{"dst":"Погрузить кого-то или что-то во что-то, полностью или частично.","id":"694f4605b5a2c326447bb46a788a9e23","ref":{"type":"idiom"},"src":"dunk (someone) or (something) into (something)","tabIndex":7},{"dst":"- Джо ДиМаджио <макает> пончики?","id":"d8930069fc7ec089a23cda6b35ab0298","ref":{"director":"Энди Экерман и другие","imdb":"https://www.imdb.com/title/tt0697741/","orig_title":"Seinfeld","title":"Сайнфелд","type":"series","url":"https://www.kinopoisk.ru/film/277627/"},"src":"-Joe DiMaggio <dunks> his doughnuts?","tabIndex":0},{"dst":"Быть побежденным кем-то в эффектной манере и/или способом, который унизителен для человека.","id":"361187e8e68702f287ec4bdda1d9f874","ref":{"type":"idiom"},"src":"get dunked on","tabIndex":7},{"dst":"\\"Джимми может <забрасывать>.","id":"503c07a8dde7f1eb7e3d45910dddbb0a","ref":{"director":"Энди Экерман и другие","imdb":"https://www.imdb.com/title/tt0697688/","orig_title":"Seinfeld","title":"Сайнфелд","type":"series","url":"https://www.kinopoisk.ru/film/277627/"},"src":"\\"Jimmy can <dunk>.","tabIndex":6},{"dst":"Наконец я все-таки выбрался из будки, пошел в мужскую уборную, шатаясь, как идиот, там налил в умывальник холодной воды и <опустил> голову до самых ушей.","id":"6a95f4adea8c4ef20cc24cbb4adf4301","ref":{"author":"Джером Дейвид Сэлинджер","title":"Над пропастью во ржи","translator":"Рита Яковлевна Райт-Ковалёва","type":"book","year":1951},"src":"Finally, though, I came out and went in the men\'s room, staggering around like a moron, and filled one of the washbowls with cold water. Then I <dunked> my head in it, right up to the ears.","tabIndex":6},{"dst":"<топящий> стул.","id":"ada09bbcb1613386b7a9fb5a021c5090","ref":{"director":"Микель Б. Андерсон и другие","imdb":"https://www.imdb.com/title/tt1546634/","orig_title":"Simpsons, The","title":"Симпсоны","type":"series","url":"https://www.kinopoisk.ru/film/77164/"},"src":"the <dunking> stool.","tabIndex":6},{"dst":"Всего пару <глотков>.","id":"567e0a9d41eca2a741fd5e99179041cb","ref":{"director":"Вольфганг Райтерман","imdb":"https://www.imdb.com/title/tt0065421/","orig_title":"AristoCats, The","title":"Коты-аристократы","type":"movie","url":"https://www.kinopoisk.ru/film/26656/"},"src":"Just a few <dunks>.","tabIndex":6}]}}"""
examples_namespace = json.loads(text)


def test_get_translations():
    expected = ["макать", "замочить", "Данк"]
    result = parser.get_translations(translation_namespace)
    assert len(result) == len(expected)
    assert all(i in result for i in expected)


def test_get_exclusive():
    expected = ["Приятно провести время."]
    result = parser.get_exclusive(exclusive_namespace)
    assert len(result) == len(expected)
    assert all(i in result for i in expected)


def test_get_transcriptions():
    expected = ["dʌŋk"]
    result = parser.get_transcriptions(translation_namespace)
    assert result == expected


def test_get_verb_forms():
    expected = {"indefinite": ["dunked"], "participle": ["dunked"]}
    result = parser.get_verb_forms(translation_namespace)
    assert result == expected


def test_get_noun_plural():
    expected = ["dunks"]
    result = parser.get_noun_plural(translation_namespace)
    assert result == expected


def test_get_idioms():
    result = parser.get_idioms(examples_namespace)
    assert len(result) > 5
    s = ["slam dunk", "В буквальном смысле слова, гол, забитый в баскетболе, если положить мяч прямо в кольцо рукой."]
    assert s in result


def test_get_examples():
    result = parser.get_examples(examples_namespace)
    assert len(result) > 5
    s = ["Say, where'd you learn to <dunk>?", "Скажи, где ты научилась так <макать>?"]
    assert s in result
